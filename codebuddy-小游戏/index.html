<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI PlayLab - AI驱动的游戏创作平台</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;700;900&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* 修复按钮样式 */
        .btn-hero {
            position: relative !important;
            background: linear-gradient(135deg, #b47fff, #ff3cc7) !important;
            border: 2px solid #ff3cc7 !important;
            padding: 12px 32px !important;
            border-radius: 30px !important;
            cursor: pointer !important;
            overflow: hidden !important;
            font-weight: 700 !important;
            font-size: 15px !important;
            color: white !important;
            transition: all 0.3s ease !important;
        }
        .btn-hero:hover {
            box-shadow: 
                0 0 30px rgba(255, 60, 199, 0.8),
                0 0 50px rgba(180, 127, 255, 0.6),
                inset 0 0 20px rgba(255, 255, 255, 0.2) !important;
            transform: translateY(-3px) scale(1.05) !important;
            border-color: #00fff9 !important;
        }
        .btn-hero:active {
            transform: translateY(-1px) scale(1.02) !important;
        }
    </style>
</head>
<body>
    <!-- 自定义光标 -->
    <div id="customCursor"></div>
    
    <!-- 背景网格 -->
    <div class="cyber-grid"></div>
    
    <!-- 动态粒子背景 -->
    <canvas id="particleCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0;"></canvas>

    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <div class="logo-text">AI PLAYLAB</div>
                <div class="logo-subtitle">POWERED BY AI</div>
            </div>
            <div class="nav-menu">
                <a href="#" class="nav-link" onclick="renderGameGallery(); return false;">发现</a>
                <a href="#" class="nav-link" onclick="document.getElementById('leaderboard').scrollIntoView({ behavior: 'smooth' }); return false;">排行榜</a>
                <a href="#" class="nav-link" onclick="showAbout(); return false;">关于</a>
                <button class="btn-user-profile" onclick="openUserProfile()" id="userProfileBtn">
                    <img src="" alt="" class="user-avatar" id="navUserAvatar">
                    <span id="navUserName">登录</span>
                </button>
                <button class="btn-create-game" onclick="openCreator()">
                    <span class="btn-text">✨ 创作游戏</span>
                    <div class="btn-glow"></div>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero区域 -->
    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">用AI创造你的游戏</h1>
            <p class="hero-desc">只需一句话，AI帮你生成可玩的游戏 • 分享创意 • 无限可能</p>
            <button class="btn-hero" onclick="openCreator()">🚀 立即开始创作</button>
        </div>
    </section>

    <!-- 主内容区 -->
    <div class="main-container">
        <div class="container">
            <div class="content-layout">
                <!-- 游戏画廊 -->
                <section class="gallery-section">
                    <div class="section-header-row">
                        <div class="header-left">
                            <h2>🎮 游戏作品</h2>
                            <div class="filter-tabs-wrapper">
                                <div class="filter-tabs" id="filterTabs">
                                    <button class="filter-btn active" onclick="filterGames('all')">全部</button>
                                    <button class="filter-btn" onclick="filterGames('jump')">🦖 跳跃</button>
                                    <button class="filter-btn" onclick="filterGames('fly')">🐦 飞行</button>
                                    <button class="filter-btn" onclick="filterGames('match')">💎 消除</button>
                                    <button class="filter-btn" onclick="filterGames('space')">🚀 太空</button>
                                    <button class="filter-btn filter-hidden" onclick="filterGames('connect')">🔗 连线</button>
                                    <button class="filter-btn filter-hidden" onclick="filterGames('parkour')">🏃 跑酷</button>
                                    <button class="filter-btn filter-hidden" onclick="filterGames('shoot')">✈️ 射击</button>
                                    <button class="filter-btn filter-hidden" onclick="filterGames('tank')">🎖️ 防御</button>
                                </div>
                                <button class="btn-toggle-filters" id="btnToggleFilters" onclick="toggleFilters()">
                                    <span id="toggleFilterText">更多</span>
                                    <span id="toggleFilterIcon">▼</span>
                                </button>
                            </div>
                        </div>
                        <div class="gallery-tabs">
                            <button class="gallery-tab active" onclick="switchGalleryView('all')">
                                <span class="tab-icon">🌐</span>
                                <span>全部作品</span>
                            </button>
                            <button class="gallery-tab" onclick="switchGalleryView('mine')">
                                <span class="tab-icon">👤</span>
                                <span>我的作品</span>
                                <span class="badge" id="myGamesCount">0</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="game-grid" id="gameGrid">
                        <!-- 游戏卡片将由JS生成 -->
                    </div>
                    
                    <div class="empty-state" id="emptyState" style="display: none;">
                        <div class="empty-icon">🎮</div>
                        <h3 class="empty-title">还没有创作作品</h3>
                        <p class="empty-desc">点击"创作游戏"按钮，用AI创建你的第一个游戏吧！</p>
                        <button class="btn-hero" onclick="openCreator()">开始创作</button>
                    </div>
                </section>

                <!-- 侧边栏 -->
                <aside class="sidebar" id="leaderboard">
                    <!-- 排行榜 -->
                    <div class="widget">
                        <h3 class="widget-title">🏆 排行榜</h3>
                        <div class="ranking-tabs">
                            <button class="rank-tab active" onclick="switchRanking('daily')">日榜</button>
                            <button class="rank-tab" onclick="switchRanking('weekly')">周榜</button>
                            <button class="rank-tab" onclick="switchRanking('monthly')">月榜</button>
                        </div>
                        <div class="ranking-list" id="rankingList">
                            <!-- 排行榜由JS生成 -->
                        </div>
                    </div>

                    <!-- 收益信息 -->
                    <div class="widget revenue-widget">
                        <h3 class="widget-title">💰 创作者收益</h3>
                        <div class="revenue-info">
                            <p>您的作品将展示广告，收益全归您所有！</p>
                            <div class="revenue-stat">
                                <span class="stat-label">平均每千次播放</span>
                                <span class="stat-value">¥5-15</span>
                                <span class="stat-unit">人民币</span>
                            </div>
                            <div class="revenue-tips">
                                <p>💡 提升收益技巧：</p>
                                <ul>
                                    <li>创作高质量游戏</li>
                                    <li>增加游戏互动性</li>
                                    <li>积极与社区互动</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <!-- 创作弹窗 -->
    <div class="modal" id="creatorModal">
        <div class="modal-backdrop" onclick="closeCreator()"></div>
        <div class="modal-container creator-modal">
            <button class="modal-close" onclick="closeCreator()">×</button>
            
            <div class="creator-header">
                <h2>✨ 创作新游戏</h2>
                <p>用自然语言描述你的游戏创意，AI将为你生成可玩的游戏！</p>
            </div>

            <div class="input-section">
                <label class="input-label">💭 游戏创意</label>
                <textarea 
                    id="gamePrompt" 
                    class="prompt-input" 
                    rows="4" 
                    placeholder="例如：创建一个小恐龙跳跃游戏，主角需要躲避障碍物，按空格键跳跃..."
                ></textarea>
                <div class="prompt-examples">
                    <span class="examples-label">💡 试试这些创意：</span>
                    <div class="example-chips">
                        <button class="chip" onclick="setPrompt('创建一个小恐龙跳跃游戏，需要躲避仙人掌障碍物')">🦖 跳跃恐龙</button>
                        <button class="chip" onclick="setPrompt('制作一个飞行游戏，小鸟需要穿过管道')">🐦 飞行挑战</button>
                        <button class="chip" onclick="setPrompt('做一个消除游戏，三个相同颜色的方块可以消除')">💎 方块消除</button>
                    </div>
                </div>
            </div>

            <div class="ai-selector">
                <label class="input-label">🤖 选择AI引擎</label>
                <div class="ai-models">
                    <div class="model-card active" data-model="playlab" onclick="selectAI('playlab')">
                        <div class="model-check">✓</div>
                        <div class="model-icon">⚡</div>
                        <div class="model-name">PlayLab AI</div>
                        <div class="model-desc">推荐</div>
                    </div>
                    <div class="model-card" data-model="gpt4" onclick="selectAI('gpt4')">
                        <div class="model-check">✓</div>
                        <div class="model-icon">🧠</div>
                        <div class="model-name">GPT-4</div>
                        <div class="model-desc">逻辑强</div>
                    </div>
                    <div class="model-card" data-model="claude" onclick="selectAI('claude')">
                        <div class="model-check">✓</div>
                        <div class="model-icon">🎨</div>
                        <div class="model-name">Claude</div>
                        <div class="model-desc">创意型</div>
                    </div>
                </div>
            </div>

            <button class="btn-generate" onclick="generateGame()">
                <span>🚀 开始生成游戏</span>
            </button>
        </div>
    </div>

    <!-- 加载弹窗 -->
    <div class="modal" id="loadingModal">
        <div class="modal-backdrop"></div>
        <div class="loading-container">
            <div class="orbit-spinner">
                <div class="orbit"></div>
                <div class="orbit"></div>
                <div class="orbit"></div>
            </div>
            <h3 class="loading-title">AI 正在创作中...</h3>
            <p class="loading-status" id="loadingStatus">正在分析您的创意...</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
    </div>

    <!-- 游戏详情弹窗 -->
    <div class="modal" id="gameModal">
        <div class="modal-backdrop" onclick="closeGameModal()"></div>
        <div class="modal-container game-modal">
            <button class="modal-close" onclick="closeGameModal()">×</button>
            
            <!-- 头部 -->
            <div class="game-modal-header">
                <div class="game-title-area">
                    <h2 id="modalGameTitle">游戏标题</h2>
                    <div class="game-meta">
                        <span>👤 <span id="modalGameAuthor">作者</span></span>
                        <span>👁️ <span id="modalGameViews">0</span> 次播放</span>
                    </div>
                </div>
                <button class="btn-remix" onclick="remixGame()">
                    🎨 Remix 二创
                </button>
            </div>

            <!-- 主体 -->
            <div class="game-modal-body">
                <!-- 游戏区域 -->
                <div class="game-canvas-area">
                    <canvas id="gameCanvas" width="800" height="500"></canvas>
                    <div class="game-overlay" id="gameOverlay">
                        <button class="btn-play" onclick="startGamePlay()">
                            <span class="play-icon">▶</span>
                            <span>开始游戏</span>
                        </button>
                    </div>
                    <div class="game-score-panel">
                        得分：<span id="gameScore">0</span>
                    </div>
                </div>

                <!-- 侧边栏 -->
                <div class="game-sidebar">
                    <!-- 广告位 -->
                    <div class="ad-placement">
                        <div class="ad-header">💰 广告位</div>
                        <div class="ad-content">
                            <p>此处展示广告内容</p>
                            <p class="ad-note">收益归创作者所有</p>
                        </div>
                        <div class="ad-stats">
                            <div class="stat">
                                <span>播放量</span>
                                <strong id="adViews">0</strong>
                            </div>
                            <div class="stat">
                                <span>预估收益</span>
                                <strong id="adRevenue">¥0.00</strong>
                            </div>
                        </div>
                    </div>

                    <!-- 互动按钮 -->
                    <div class="action-buttons">
                        <button class="action-btn like-btn" id="likeBtn" onclick="toggleLike()">
                            <span class="icon" id="likeIcon">🤍</span>
                            <span id="likeText">点赞</span>
                            <span class="count" id="likeCount">0</span>
                        </button>
                        <button class="action-btn" onclick="focusCommentInput()">
                            <span class="icon">💬</span>
                            <span>评论</span>
                            <span class="count" id="commentCountBtn">0</span>
                        </button>
                        <button class="action-btn share-btn" onclick="shareGame()">
                            <span class="icon">🔗</span>
                            <span>分享游戏</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 标签页 -->
            <div class="game-tabs">
                <div class="tabs-nav">
                    <button class="tab-btn active" onclick="switchTab('info')">详情</button>
                    <button class="tab-btn" onclick="switchTab('prompt')">创作过程</button>
                    <button class="tab-btn" onclick="switchTab('comments')">评论区</button>
                </div>

                <!-- 详情页 -->
                <div class="tab-panel active" id="tabInfo">
                    <h4>📝 游戏介绍</h4>
                    <p id="gameDescription">游戏描述...</p>
                    <div class="game-tags" id="gameTags">
                        <!-- 标签将由JS生成 -->
                    </div>
                </div>

                <!-- 创作过程 -->
                <div class="tab-panel" id="tabPrompt">
                    <h4>💭 创作者的提示词</h4>
                    <div class="prompt-display" id="displayPrompt">
                        提示词内容...
                    </div>
                    <div class="ai-info">
                        <div class="info-item">
                            <span class="label">🤖 AI引擎：</span>
                            <span id="aiModelUsed">PlayLab AI</span>
                        </div>
                        <div class="info-item">
                            <span class="label">⏱️ 生成时间：</span>
                            <span id="genTime">3.5秒</span>
                        </div>
                    </div>
                </div>

                <!-- 评论区 -->
                <div class="tab-panel" id="tabComments">
                    <div class="comment-input-area">
                        <textarea 
                            id="commentInput" 
                            class="comment-input" 
                            rows="3" 
                            placeholder="说说你的想法..."
                        ></textarea>
                        <button class="btn-submit-comment" onclick="submitComment()">发表评论</button>
                    </div>
                    <div class="comments-list" id="commentsList">
                        <p class="no-comments">暂无评论，快来抢沙发吧！</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 个人中心弹窗 -->
    <div class="modal" id="userProfileModal">
        <div class="modal-backdrop" onclick="closeUserProfile()"></div>
        <div class="modal-container profile-modal">
            <button class="modal-close" onclick="closeUserProfile()">×</button>
            
            <div class="profile-header">
                <div class="profile-cover"></div>
                <div class="profile-info">
                    <div class="profile-avatar-wrapper">
                        <img src="" alt="" class="profile-avatar" id="profileAvatar">
                        <button class="btn-change-avatar" onclick="changeAvatar()">📷</button>
                    </div>
                    <div class="profile-details">
                        <h2 class="profile-name" id="profileName">未登录</h2>
                        <p class="profile-email" id="profileEmail"></p>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="profileGamesCount">0</span>
                                <span class="stat-label">作品</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="profileFollowingCount">0</span>
                                <span class="stat-label">关注</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="profileFollowersCount">0</span>
                                <span class="stat-label">粉丝</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="profile-tabs">
                <button class="profile-tab active" onclick="switchProfileTab('settings')">⚙️ 设置</button>
                <button class="profile-tab" onclick="switchProfileTab('following')">👥 关注列表</button>
                <button class="profile-tab" onclick="switchProfileTab('my-games')">🎮 我的游戏</button>
            </div>

            <!-- 设置标签页 -->
            <div class="profile-panel active" id="panelSettings">
                <div class="login-section" id="loginSection">
                    <h3>登录账号</h3>
                    <p class="login-desc">登录后可以保存数据、创作游戏</p>
                    
                    <!-- 登录/注册切换 -->
                    <div class="auth-tabs">
                        <button class="auth-tab active" onclick="switchAuthTab('login')" id="tabLogin">登录</button>
                        <button class="auth-tab" onclick="switchAuthTab('register')" id="tabRegister">注册</button>
                    </div>
                    
                    <!-- 登录表单 -->
                    <div class="auth-form" id="loginForm">
                        <input type="text" id="loginUsername" class="setting-input" placeholder="用户名" maxlength="20">
                        <input type="password" id="loginPassword" class="setting-input" placeholder="密码" maxlength="50">
                        <button class="btn-simple-login" onclick="handleLogin()">
                            <span>🔑 登录</span>
                        </button>
                    </div>
                    
                    <!-- 注册表单 -->
                    <div class="auth-form" id="registerForm" style="display: none;">
                        <input type="text" id="registerUsername" class="setting-input" placeholder="用户名（2-20个字符）" maxlength="20">
                        <input type="password" id="registerPassword" class="setting-input" placeholder="密码（至少6个字符）" maxlength="50">
                        <input type="password" id="registerPasswordConfirm" class="setting-input" placeholder="确认密码" maxlength="50">
                        <button class="btn-simple-login" onclick="handleRegister()">
                            <span>✨ 注册</span>
                        </button>
                    </div>
                    
                    <p class="login-tip">💡 提示：账号信息会保存在本地，下次自动登录</p>
                </div>

                <div class="settings-section" id="settingsSection" style="display: none;">
                    <div class="setting-item">
                        <label class="setting-label">用户名</label>
                        <input type="text" id="displayUsername" class="setting-input" disabled>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">修改密码</label>
                        <div class="setting-input-group">
                            <input type="password" id="newPassword" class="setting-input" placeholder="输入新密码">
                            <button class="btn-save-setting" onclick="changePassword()">修改</button>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">用户ID</label>
                        <input type="text" id="userIdDisplay" class="setting-input" disabled>
                    </div>
                    <button class="btn-logout" onclick="logout()">退出登录</button>
                </div>
            </div>

            <!-- 关注列表标签页 -->
            <div class="profile-panel" id="panelFollowing">
                <div class="following-list" id="followingList">
                    <p class="empty-message">暂无关注的用户</p>
                </div>
            </div>

            <!-- 我的游戏标签页 -->
            <div class="profile-panel" id="panelMyGames">
                <div class="my-games-grid" id="myGamesGrid">
                    <p class="empty-message">暂无创作的游戏</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 用户主页弹窗 -->
    <div class="modal" id="userPageModal">
        <div class="modal-backdrop" onclick="closeUserPage()"></div>
        <div class="modal-container profile-modal">
            <button class="modal-close" onclick="closeUserPage()">×</button>
            
            <div class="profile-header">
                <div class="profile-cover"></div>
                <div class="profile-info">
                    <div class="profile-avatar-wrapper">
                        <img src="" alt="" class="profile-avatar" id="userPageAvatar">
                    </div>
                    <div class="profile-details">
                        <h2 class="profile-name" id="userPageName">用户名</h2>
                        <div class="profile-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="userPageGamesCount">0</span>
                                <span class="stat-label">作品</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="userPageFollowersCount">0</span>
                                <span class="stat-label">粉丝</span>
                            </div>
                        </div>
                        <button class="btn-follow" id="btnFollowUser" onclick="toggleFollow()">
                            <span id="followBtnText">+ 关注</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="user-games-section">
                <h3>🎮 TA的作品</h3>
                <div class="user-games-grid" id="userPageGamesGrid">
                    <p class="empty-message">暂无作品</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>关于我们</h4>
                    <ul>
                        <li><a href="#" onclick="showAboutModal('company'); return false;">公司介绍</a></li>
                        <li><a href="#" onclick="showAboutModal('team'); return false;">团队介绍</a></li>
                        <li><a href="#" onclick="showAboutModal('contact'); return false;">联系我们</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>法律条款</h4>
                    <ul>
                        <li><a href="#" onclick="showAboutModal('terms'); return false;">用户协议</a></li>
                        <li><a href="#" onclick="showAboutModal('privacy'); return false;">隐私政策</a></li>
                        <li><a href="#" onclick="showAboutModal('copyright'); return false;">版权声明</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>帮助支持</h4>
                    <ul>
                        <li><a href="#" onclick="showAboutModal('help'); return false;">使用帮助</a></li>
                        <li><a href="#" onclick="showAboutModal('feedback'); return false;">意见反馈</a></li>
                        <li><a href="#" onclick="showAboutModal('faq'); return false;">常见问题</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>关注我们</h4>
                    <div class="social-links">
                        <a href="#" title="微信公众号">📱</a>
                        <a href="#" title="微博">🐦</a>
                        <a href="#" title="抖音">🎵</a>
                        <a href="#" title="B站">📺</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-certifications">
                    <span>🏅 ICP备案号：京ICP备2024XXXXXX号-1</span>
                    <span>🔒 网络文化经营许可证：京网文[2024]XXXX-XXX号</span>
                    <span>🎮 游戏版号：ISBN 978-7-XXXX-XXXX-X</span>
                </div>
                <p class="copyright">
                    © 2024 AI PlayLab 版权所有 | 深圳市智创科技有限公司
                </p>
                <p class="footer-disclaimer">
                    本平台所有游戏内容均由AI生成，仅供娱乐学习使用。如有侵权请联系删除。
                </p>
            </div>
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>
